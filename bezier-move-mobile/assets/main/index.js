System.register("chunks:///_virtual/BezierMove.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var n,e,i,a,r,o,s,u,c,h,l,p,d;return{setters:[function(t){n=t.applyDecoratedDescriptor,e=t.inheritsLoose,i=t.initializerDefineProperty,a=t.assertThisInitialized},function(t){r=t.cclegacy,o=t._decorator,s=t.Enum,u=t.math,c=t.Vec3,h=t.Node,l=t.Graphics,p=t.Color,d=t.Component}],execute:function(){var _,I,O,b,g,M,f,m,P,y,w,v,q,x,T,z,k,C,j,S,R,N,B;r._RF.push({},"f680dkagx9PmbfqtF463/Ua","BezierMove",void 0);var A=o.ccclass,D=o.property,E=t("EasingType",function(t){return t.linear="linear",t.smooth="smooth",t.fade="fade",t.quadIn="quadIn",t.quadOut="quadOut",t.quadInOut="quadInOut",t.quadOutIn="quadOutIn",t.cubicIn="cubicIn",t.cubicOut="cubicOut",t.cubicInOut="cubicInOut",t.cubicOutIn="cubicOutIn",t.quartIn="quartIn",t.quartOut="quartOut",t.quartInOut="quartInOut",t.quartOutIn="quartOutIn",t.quintIn="quintIn",t.quintOut="quintOut",t.quintInOut="quintInOut",t.quintOutIn="quintOutIn",t.sineIn="sineIn",t.sineOut="sineOut",t.sineInOut="sineInOut",t.sineOutIn="sineOutIn",t.expoIn="expoIn",t.expoOut="expoOut",t.expoInOut="expoInOut",t.expoOutIn="expoOutIn",t.circIn="circIn",t.circOut="circOut",t.circInOut="circInOut",t.circOutIn="circOutIn",t.elasticIn="elasticIn",t.elasticOut="elasticOut",t.elasticInOut="elasticInOut",t.elasticOutIn="elasticOutIn",t.backIn="backIn",t.backOut="backOut",t.backInOut="backInOut",t.backOutIn="backOutIn",t.bounceIn="bounceIn",t.bounceOut="bounceOut",t.bounceInOut="bounceInOut",t.bounceOutIn="bounceOutIn",t}({})),L=t("ControlPointSideType",function(t){return t[t.Left=1]="Left",t[t.Right=-1]="Right",t[t.Random=0]="Random",t}({}));t("BezierMove",(_=A("BezierMove"),I=D({displayName:"速度"}),O=D({displayName:"控制点方向",tooltip:"0=随机, 1=左侧，-1=右侧（相对于从起点到终点的方向）"}),b=D({displayName:"控制点偏移系数",tooltip:"0~1之间,控制点偏移系数,值越大曲线越弯曲"}),g=D({displayName:"控制点随机性",tooltip:"0~1之间,控制点随机性,值越大随机性越强"}),M=D({displayName:"自动旋转"}),f=D({displayName:"显示轨迹"}),m=D({displayName:"轨迹颜色"}),P=D({displayName:"轨迹宽度"}),y=D({displayName:"缓动函数",type:s(E)}),w=D({displayName:"角度平滑系数",tooltip:"0~1之间,值越小旋转越平滑,0表示不旋转,1表示立即旋转"}),_((x=n((q=function(t){function n(){for(var n,e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];return n=t.call.apply(t,[this].concat(r))||this,i(n,"speed",x,a(n)),i(n,"controlPointSide",T,a(n)),i(n,"controlPointOffset",z,a(n)),i(n,"controlPointRandomness",k,a(n)),i(n,"autoRotate",C,a(n)),i(n,"showTrajectory",j,a(n)),i(n,"trajectoryColor",S,a(n)),i(n,"trajectoryWidth",R,a(n)),i(n,"easing",N,a(n)),i(n,"rotationSmoothness",B,a(n)),n._graphics=null,n._currentAngle=0,n._startPoint=new c,n._endPoint=new c,n._controlPoint=new c,n._t=0,n._totalTime=0,n._isMoving=!1,n._callback=null,n._target=void 0,n}e(n,t);var r=n.prototype;return r.onEnable=function(){this._startPoint.set(this.node.position),this._currentAngle=this.node.angle,this._initGraphics()},r.onDisable=function(){if(this._graphics&&(this._graphics.clear(),this._graphics.node&&this._graphics.node.isValid)){this.node.uuid;this._graphics.node.destroy()}},r.onMoveComplete=function(t,n){this._callback=t,this._target=n},r.update=function(t){if(this._isMoving&&!(this._totalTime<=0)){this._t+=t/this._totalTime;var n=this._applyEasing(this._t);if(this._t>=1){if(this.node.setPosition(this._endPoint),this._isMoving=!1,this._callback&&this._callback(),this.showTrajectory&&this._graphics&&(this._graphics.clear(),this._graphics.node.parent!==this.node)){var e=this._graphics.node;e.parent&&e.removeFromParent(),this.node.addChild(e)}}else{var i=this._calculateQuadraticBezierPoint(n,this._startPoint,this._controlPoint,this._endPoint);if(this.node.setPosition(i),this.autoRotate){var a=this._calculateQuadraticBezierTangent(n,this._startPoint,this._controlPoint,this._endPoint);if(a.lengthSqr()>.001){var r=u.toDegree(Math.atan2(a.y,a.x))-90;this._currentAngle=this._smoothAngle(this._currentAngle,r,this.rotationSmoothness),this.node.angle=this._currentAngle}}}}},r.moveTo=function(t){this._startPoint.set(this.node.position),this._endPoint.set(t),this._currentAngle=this.node.angle,this._generateControlPoint();var n=c.distance(this._startPoint,this._controlPoint)+c.distance(this._controlPoint,this._endPoint);this._totalTime=n/this.speed,this._totalTime<.1&&(this._totalTime=.1),this.showTrajectory&&this._drawTrajectory(),this._t=0,this._isMoving=!0},r._generateControlPoint=function(){var t=new c;c.lerp(t,this._startPoint,this._endPoint,.5);var n=new c;c.subtract(n,this._endPoint,this._startPoint);var e=new c(-n.y,n.x,0);c.normalize(e,e);var i=1;i=this.controlPointSide===L.Random?Math.random()<.5?1:-1:this.controlPointSide;var a=c.distance(this._startPoint,this._endPoint)*this.controlPointOffset,r=(2*Math.random()-1)*this.controlPointRandomness;this._controlPoint.set(t.x+e.x*a*(1+r)*i,t.y+e.y*a*(1+r)*i,0)},r.stopMoving=function(){this._isMoving=!1},r._calculateQuadraticBezierPoint=function(t,n,e,i){var a=1-t,r=t*t,o=a*a,s=new c;c.multiplyScalar(s,n,o);var u=new c;c.multiplyScalar(u,e,2*a*t),c.add(s,s,u);var h=new c;return c.multiplyScalar(h,i,r),c.add(s,s,h),s},r._calculateQuadraticBezierTangent=function(t,n,e,i){var a=1-t,r=new c,o=new c;c.subtract(o,e,n),c.multiplyScalar(o,o,2*a);var s=new c;return c.subtract(s,i,e),c.multiplyScalar(s,s,2*t),c.add(r,o,s),r},r._applyEasing=function(t){switch(t=Math.max(0,Math.min(1,t)),this.easing){case E.linear:return t;case E.smooth:case E.fade:return t*t*(3-2*t);case E.quadIn:return t*t;case E.quadOut:return t*(2-t);case E.quadInOut:return t<.5?2*t*t:(4-2*t)*t-1;case E.quadOutIn:return t<.5?.5*(1-Math.pow(-2*t+1,2)):.5*Math.pow(2*t-1,2)+.5;case E.cubicIn:return t*t*t;case E.cubicOut:return--t*t*t+1;case E.cubicInOut:return t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1;case E.cubicOutIn:return t<.5?.5*((t=2*t-1)*t*t+1):.5*(t=2*t-1)*t*t+.5;case E.quartIn:return t*t*t*t;case E.quartOut:return 1- --t*t*t*t;case E.quartInOut:return t<.5?8*t*t*t*t:1-8*--t*t*t*t;case E.quartOutIn:return t<.5?.5*(1-Math.pow(-2*t+1,4)):.5*Math.pow(2*t-1,4)+.5;case E.quintIn:return t*t*t*t*t;case E.quintOut:return 1+--t*t*t*t*t;case E.quintInOut:return t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t;case E.quintOutIn:return t<.5?.5*(1-Math.pow(-2*t+1,5)):.5*Math.pow(2*t-1,5)+.5;case E.sineIn:return 1-Math.cos(t*Math.PI/2);case E.sineOut:return Math.sin(t*Math.PI/2);case E.sineInOut:return.5*(1-Math.cos(Math.PI*t));case E.sineOutIn:return t<.5?.5*Math.sin(t*Math.PI):.5-.5*Math.cos((2*t-1)*Math.PI/2);case E.circIn:return 1-Math.sqrt(1-t*t);case E.circOut:return Math.sqrt(1-(t-1)*(t-1));case E.circInOut:return t<.5?(1-Math.sqrt(1-4*t*t))/2:(Math.sqrt(1-Math.pow(-2*t+2,2))+1)/2;case E.circOutIn:return t<.5?.5*Math.sqrt(1-Math.pow(-2*t+1,2)):.5*(2-Math.sqrt(1-Math.pow(2*t-1,2)));case E.expoIn:return 0===t?0:Math.pow(2,10*t-10);case E.expoOut:return 1===t?1:1-Math.pow(2,-10*t);case E.expoInOut:return 0===t?0:1===t?1:t<.5?Math.pow(2,20*t-10)/2:(2-Math.pow(2,-20*t+10))/2;case E.expoOutIn:return 0===t?0:1===t?1:t<.5?.5*(1-Math.pow(2,-20*t)):.5*Math.pow(2,20*(t-.5)-10)+.5;case E.backIn:var n=1.70158;return t*t*((n+1)*t-n);case E.backOut:var e=1.70158;return(t-=1)*t*((e+1)*t+e)+1;case E.backInOut:var i=2.5949095;return t<.5?2*t*(2*t)*((i+1)*(2*t)-i)/2:((2*t-2)*(2*t-2)*((i+1)*(2*t-2)+i)+2)/2;case E.backOutIn:var a=1.70158;return t<.5?.5*((t=2*t-1)*t*((a+1)*t+a)+1):.5*(t=2*t-1)*t*((a+1)*t-a)+.5;case E.elasticIn:return 0===t?0:1===t?1:-Math.pow(2,10*(t-1))*Math.sin(5*(t-1.1)*Math.PI);case E.elasticOut:return 0===t?0:1===t?1:Math.pow(2,-10*t)*Math.sin(5*(t-.1)*Math.PI)+1;case E.elasticInOut:return 0===t?0:1===t?1:t<.5?-.5*Math.pow(2,20*t-10)*Math.sin((20*t-11.125)*Math.PI/2.25):.5*Math.pow(2,-20*t+10)*Math.sin((20*t-11.125)*Math.PI/2.25)+1;case E.elasticOutIn:return 0===t?0:1===t?1:t<.5?.5*Math.pow(2,-20*t)*Math.sin(5*(20*t-.5)*Math.PI)+.5:.5*-Math.pow(2,10*(2*t-1.5))*Math.sin(5*(2*t-1.6)*Math.PI)+.5;case E.bounceIn:return 1-this._bounceOut(1-t);case E.bounceOut:return this._bounceOut(t);case E.bounceInOut:return t<.5?(1-this._bounceOut(1-2*t))/2:(1+this._bounceOut(2*t-1))/2;case E.bounceOutIn:return t<.5?this._bounceOut(2*t)/2:(1-this._bounceOut(2-2*t))/2+.5;default:return t}},r._bounceOut=function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},r._initGraphics=function(){var t,n="TrajectoryGraphics_"+this.node.uuid,e=null==(t=this.node.parent)?void 0:t.getChildByName(n);e||(e=new h(n),this.node.parent?this.node.parent.addChild(e):this.node.addChild(e)),this._graphics=e.getComponent(l),this._graphics||(this._graphics=e.addComponent(l))},r._drawTrajectory=function(){if(this.showTrajectory&&this._graphics){this._graphics.clear(),this._graphics.lineWidth=this.trajectoryWidth,this._graphics.strokeColor=this.trajectoryColor;var t=this._graphics.node;this.node.parent&&(t.parent=this.node.parent,this._graphics.moveTo(this._startPoint.x,this._startPoint.y),this._graphics.quadraticCurveTo(this._controlPoint.x,this._controlPoint.y,this._endPoint.x,this._endPoint.y)),this._graphics.stroke()}},r._smoothAngle=function(t,n,e){e=Math.max(.001,Math.min(1,e));var i=function(t){return(t%=360)<0?t+360:t},a=i(t),r=i(n)-a;return r>180?r-=360:r<-180&&(r+=360),t+r*e},n}(d)).prototype,"speed",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 600}}),T=n(q.prototype,"controlPointSide",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return L.Left}}),z=n(q.prototype,"controlPointOffset",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),k=n(q.prototype,"controlPointRandomness",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.3}}),C=n(q.prototype,"autoRotate",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),j=n(q.prototype,"showTrajectory",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),S=n(q.prototype,"trajectoryColor",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new p(0,255,0,255)}}),R=n(q.prototype,"trajectoryWidth",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 3}}),N=n(q.prototype,"easing",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return E.linear}}),B=n(q.prototype,"rotationSmoothness",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.6}}),v=q))||v));r._RF.pop()}}}));

System.register("chunks:///_virtual/GameManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BezierMove.ts"],(function(e){var t,o,n,r,i,s,a,c,d,l,u,f,h,p,w,g,S,b,m;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.inheritsLoose,n=e.createClass,r=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){s=e.cclegacy,a=e._decorator,c=e.Node,d=e.EditBox,l=e.Toggle,u=e.ToggleContainer,f=e.instantiate,h=e.math,p=e.UITransform,w=e.Vec3,g=e.Component},function(e){S=e.ControlPointSideType,b=e.EasingType,m=e.BezierMove}],execute:function(){var y,_,T,O,E,v,C,L,k,z,G,I,R,D,P,M,N,A,B,H,U,j;s._RF.push({},"7d800A9z+9B6KOipS6FWVNf","GameManager",void 0);var x=a.ccclass,F=a.property;e("GameManager",(y=x("GameManager"),_=F(c),T=F(d),O=F(d),E=F(l),v=F([c]),C=F(u),L=F(u),k=F(u),z=F(u),y((R=t((I=function(e){function t(){for(var t,o=arguments.length,n=new Array(o),s=0;s<o;s++)n[s]=arguments[s];return t=e.call.apply(e,[this].concat(n))||this,r(t,"ndSword",R,i(t)),r(t,"_numberOfSwords",D,i(t)),t._speed=600,r(t,"countOfSwords",P,i(t)),r(t,"speedOfSwords",M,i(t)),r(t,"showtrace",N,i(t)),r(t,"swordList",A,i(t)),r(t,"controlSide",B,i(t)),r(t,"offset",H,i(t)),r(t,"easingControl",U,i(t)),r(t,"rotationSmooth",j,i(t)),t._selectedControlSide=S.Left,t._offset=.5,t._isRandomOffset=!1,t._selectedEasingType=b.linear,t._rotationSmooth=.6,t}o(t,e);var s=t.prototype;return s.start=function(){var e=this;this.swordList.push(this.ndSword),this.createSwords(this.numberOfSwords),this.countOfSwords.string=this.numberOfSwords.toString(),this.countOfSwords.node.on(d.EventType.TEXT_CHANGED,(function(){e.numberOfSwords=parseInt(e.countOfSwords.string)}),this),this.speedOfSwords.string=this._speed.toString(),this.speedOfSwords.node.on(d.EventType.TEXT_CHANGED,(function(){e._speed=parseInt(e.speedOfSwords.string)})),this.node.on(c.EventType.TOUCH_END,this.onTouchEnd,this),this.controlSide.toggleItems.forEach((function(t,o){t.node.on(l.EventType.TOGGLE,(function(){if(t.isChecked)switch(o){case 0:e._selectedControlSide=S.Left;break;case 1:e._selectedControlSide=S.Right;break;case 2:e._selectedControlSide=S.Random}}))})),this.offset.toggleItems.forEach((function(t,o){t.node.on(l.EventType.TOGGLE,(function(){if(t.isChecked)switch(o){case 0:e._isRandomOffset=!1;break;case 1:e._isRandomOffset=!0}}))})),this.easingControl.toggleItems.forEach((function(t,o){t.node.on(l.EventType.TOGGLE,(function(){if(t.isChecked)switch(o){case 0:e._selectedEasingType=b.linear;break;case 1:e._selectedEasingType=b.quadIn;break;case 2:e._selectedEasingType=b.cubicOut;break;case 3:e._selectedEasingType=b.bounceIn}}))})),this.rotationSmooth.toggleItems.forEach((function(t,o){t.node.on(l.EventType.TOGGLE,(function(){if(t.isChecked)switch(o){case 0:e._rotationSmooth=.1;break;case 1:e._rotationSmooth=.6;break;case 2:e._rotationSmooth=1}}))}))},s.onDestroy=function(){this.node.off(c.EventType.TOUCH_END,this.onTouchEnd,this)},s.createSwords=function(e){this.deleteSwords();for(var t=0;t<e-1;t++){var o=f(this.ndSword);o.setParent(this.node),o.angle=h.randomRangeInt(-60,60),this.swordList.push(o)}},s.deleteSwords=function(){for(var e=0;e<this.swordList.length;e++)this.swordList[e]!==this.ndSword&&this.swordList[e].destroy();this.swordList.length=0,this.swordList.push(this.ndSword)},s.update=function(e){},s.onTouchEnd=function(e){for(var t=e.getUILocation(),o=this.convertToWorldPosition(t.x,t.y),n=0;n<this.swordList.length;n++){var r=this.swordList[n].getComponent(m);r.showTrajectory=this.showtrace.isChecked,r.controlPointSide=this._selectedControlSide,r.controlPointOffset=this._isRandomOffset?Math.random():this._offset,r.easing=this._selectedEasingType,r.rotationSmoothness=this._rotationSmooth,r.speed=this._speed,r.moveTo(o)}},s.convertToWorldPosition=function(e,t){return this.node.getComponent(p).convertToNodeSpaceAR(new w(e,t,0))},s.onControlSideChanged=function(e,t){},n(t,[{key:"numberOfSwords",get:function(){return this._numberOfSwords},set:function(e){console.log("set numberOfSwords:",e),this._numberOfSwords=e,this.createSwords(this._numberOfSwords)}}]),t}(g)).prototype,"ndSword",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=t(I.prototype,"_numberOfSwords",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 3}}),t(I.prototype,"numberOfSwords",[F],Object.getOwnPropertyDescriptor(I.prototype,"numberOfSwords"),I.prototype),P=t(I.prototype,"countOfSwords",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=t(I.prototype,"speedOfSwords",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=t(I.prototype,"showtrace",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=t(I.prototype,"swordList",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),B=t(I.prototype,"controlSide",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=t(I.prototype,"offset",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=t(I.prototype,"easingControl",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=t(I.prototype,"rotationSmooth",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=I))||G));s._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./BezierMove.ts","./GameManager.ts"],(function(){return{setters:[null,null],execute:function(){}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});