System.register("chunks:///_virtual/BezierMove.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var n,e,i,a,r,o,u,s,c,h,l,p,d;return{setters:[function(t){n=t.applyDecoratedDescriptor,e=t.inheritsLoose,i=t.initializerDefineProperty,a=t.assertThisInitialized},function(t){r=t.cclegacy,o=t._decorator,u=t.Enum,s=t.math,c=t.Vec3,h=t.Node,l=t.Graphics,p=t.Color,d=t.Component}],execute:function(){var I,O,_,b,M,f,P,y,g,m,w,v,q,x,T,k,z,C,j,R,S;r._RF.push({},"f680dkagx9PmbfqtF463/Ua","BezierMove",void 0);var N=o.ccclass,B=o.property,D=t("EasingType",function(t){return t.linear="linear",t.smooth="smooth",t.fade="fade",t.quadIn="quadIn",t.quadOut="quadOut",t.quadInOut="quadInOut",t.quadOutIn="quadOutIn",t.cubicIn="cubicIn",t.cubicOut="cubicOut",t.cubicInOut="cubicInOut",t.cubicOutIn="cubicOutIn",t.quartIn="quartIn",t.quartOut="quartOut",t.quartInOut="quartInOut",t.quartOutIn="quartOutIn",t.quintIn="quintIn",t.quintOut="quintOut",t.quintInOut="quintInOut",t.quintOutIn="quintOutIn",t.sineIn="sineIn",t.sineOut="sineOut",t.sineInOut="sineInOut",t.sineOutIn="sineOutIn",t.expoIn="expoIn",t.expoOut="expoOut",t.expoInOut="expoInOut",t.expoOutIn="expoOutIn",t.circIn="circIn",t.circOut="circOut",t.circInOut="circInOut",t.circOutIn="circOutIn",t.elasticIn="elasticIn",t.elasticOut="elasticOut",t.elasticInOut="elasticInOut",t.elasticOutIn="elasticOutIn",t.backIn="backIn",t.backOut="backOut",t.backInOut="backInOut",t.backOutIn="backOutIn",t.bounceIn="bounceIn",t.bounceOut="bounceOut",t.bounceInOut="bounceInOut",t.bounceOutIn="bounceOutIn",t}({})),L=t("ControlPointSideType",function(t){return t[t.Left=1]="Left",t[t.Right=-1]="Right",t[t.Random=0]="Random",t}({}));t("BezierMove",(I=N("BezierMove"),O=B({displayName:"速度"}),_=B({displayName:"控制点方向",tooltip:"0=随机, 1=左侧，-1=右侧（相对于从起点到终点的方向）"}),b=B({displayName:"控制点偏移系数",tooltip:"0~1之间,控制点偏移系数,值越大曲线越弯曲"}),M=B({displayName:"控制点随机性",tooltip:"0~1之间,控制点随机性,值越大随机性越强"}),f=B({displayName:"自动旋转"}),P=B({displayName:"显示轨迹"}),y=B({displayName:"轨迹颜色"}),g=B({displayName:"轨迹宽度"}),m=B({displayName:"缓动函数",type:u(D)}),I((q=n((v=function(t){function n(){for(var n,e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];return n=t.call.apply(t,[this].concat(r))||this,i(n,"speed",q,a(n)),i(n,"controlPointSide",x,a(n)),i(n,"controlPointOffset",T,a(n)),i(n,"controlPointRandomness",k,a(n)),i(n,"autoRotate",z,a(n)),i(n,"showTrajectory",C,a(n)),i(n,"trajectoryColor",j,a(n)),i(n,"trajectoryWidth",R,a(n)),i(n,"easing",S,a(n)),n._graphics=null,n._startPoint=new c,n._endPoint=new c,n._controlPoint=new c,n._t=0,n._totalTime=0,n._isMoving=!1,n._callback=null,n._target=void 0,n}e(n,t);var r=n.prototype;return r.start=function(){this._startPoint.set(this.node.position),this._initGraphics()},r.onDestroy=function(){if(this._graphics&&(this._graphics.clear(),this._graphics.node&&this._graphics.node.isValid)){this.node.uuid;this._graphics.node.destroy()}},r.onMoveComplete=function(t,n){this._callback=t,this._target=n},r.update=function(t){if(this._isMoving&&!(this._totalTime<=0)){this._t+=t/this._totalTime;var n=this._applyEasing(this._t);if(this._t>=1){if(this.node.setPosition(this._endPoint),this._isMoving=!1,this._callback&&this._callback(),this.showTrajectory&&this._graphics&&(this._graphics.clear(),this._graphics.node.parent!==this.node)){var e=this._graphics.node;e.parent&&e.removeFromParent(),this.node.addChild(e)}}else{var i=this._calculateQuadraticBezierPoint(n,this._startPoint,this._controlPoint,this._endPoint);if(this.node.setPosition(i),this.autoRotate){var a=this._calculateQuadraticBezierTangent(n,this._startPoint,this._controlPoint,this._endPoint);if(a.lengthSqr()>.001){var r=s.toDegree(Math.atan2(a.y,a.x))-90;this.node.angle=r}}}}},r.moveTo=function(t,n){void 0===n&&(n=!0),this._startPoint.set(this.node.position),this._endPoint.set(t),n&&this._generateControlPoint();var e=c.distance(this._startPoint,this._controlPoint)+c.distance(this._controlPoint,this._endPoint);this._totalTime=e/this.speed,this._totalTime<.1&&(this._totalTime=.1),this.showTrajectory&&this._drawTrajectory(),this._t=0,this._isMoving=!0},r._generateControlPoint=function(){var t=new c;c.lerp(t,this._startPoint,this._endPoint,.5);var n=new c;c.subtract(n,this._endPoint,this._startPoint);var e=new c(-n.y,n.x,0);c.normalize(e,e);var i=1;i=this.controlPointSide===L.Random?Math.random()<.5?1:-1:this.controlPointSide;var a=c.distance(this._startPoint,this._endPoint)*this.controlPointOffset,r=(2*Math.random()-1)*this.controlPointRandomness;this._controlPoint.set(t.x+e.x*a*(1+r)*i,t.y+e.y*a*(1+r)*i,0)},r.stopMoving=function(){this._isMoving=!1},r._calculateQuadraticBezierPoint=function(t,n,e,i){var a=1-t,r=t*t,o=a*a,u=new c;c.multiplyScalar(u,n,o);var s=new c;c.multiplyScalar(s,e,2*a*t),c.add(u,u,s);var h=new c;return c.multiplyScalar(h,i,r),c.add(u,u,h),u},r._calculateQuadraticBezierTangent=function(t,n,e,i){var a=1-t,r=new c,o=new c;c.subtract(o,e,n),c.multiplyScalar(o,o,2*a);var u=new c;return c.subtract(u,i,e),c.multiplyScalar(u,u,2*t),c.add(r,o,u),r},r._applyEasing=function(t){switch(t=Math.max(0,Math.min(1,t)),this.easing){case D.linear:return t;case D.smooth:case D.fade:return t*t*(3-2*t);case D.quadIn:return t*t;case D.quadOut:return t*(2-t);case D.quadInOut:return t<.5?2*t*t:(4-2*t)*t-1;case D.quadOutIn:return t<.5?.5*(1-Math.pow(-2*t+1,2)):.5*Math.pow(2*t-1,2)+.5;case D.cubicIn:return t*t*t;case D.cubicOut:return--t*t*t+1;case D.cubicInOut:return t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1;case D.cubicOutIn:return t<.5?.5*((t=2*t-1)*t*t+1):.5*(t=2*t-1)*t*t+.5;case D.quartIn:return t*t*t*t;case D.quartOut:return 1- --t*t*t*t;case D.quartInOut:return t<.5?8*t*t*t*t:1-8*--t*t*t*t;case D.quartOutIn:return t<.5?.5*(1-Math.pow(-2*t+1,4)):.5*Math.pow(2*t-1,4)+.5;case D.quintIn:return t*t*t*t*t;case D.quintOut:return 1+--t*t*t*t*t;case D.quintInOut:return t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t;case D.quintOutIn:return t<.5?.5*(1-Math.pow(-2*t+1,5)):.5*Math.pow(2*t-1,5)+.5;case D.sineIn:return 1-Math.cos(t*Math.PI/2);case D.sineOut:return Math.sin(t*Math.PI/2);case D.sineInOut:return.5*(1-Math.cos(Math.PI*t));case D.sineOutIn:return t<.5?.5*Math.sin(t*Math.PI):.5-.5*Math.cos((2*t-1)*Math.PI/2);case D.circIn:return 1-Math.sqrt(1-t*t);case D.circOut:return Math.sqrt(1-(t-1)*(t-1));case D.circInOut:return t<.5?(1-Math.sqrt(1-4*t*t))/2:(Math.sqrt(1-Math.pow(-2*t+2,2))+1)/2;case D.circOutIn:return t<.5?.5*Math.sqrt(1-Math.pow(-2*t+1,2)):.5*(2-Math.sqrt(1-Math.pow(2*t-1,2)));case D.expoIn:return 0===t?0:Math.pow(2,10*t-10);case D.expoOut:return 1===t?1:1-Math.pow(2,-10*t);case D.expoInOut:return 0===t?0:1===t?1:t<.5?Math.pow(2,20*t-10)/2:(2-Math.pow(2,-20*t+10))/2;case D.expoOutIn:return 0===t?0:1===t?1:t<.5?.5*(1-Math.pow(2,-20*t)):.5*Math.pow(2,20*(t-.5)-10)+.5;case D.backIn:var n=1.70158;return t*t*((n+1)*t-n);case D.backOut:var e=1.70158;return(t-=1)*t*((e+1)*t+e)+1;case D.backInOut:var i=2.5949095;return t<.5?2*t*(2*t)*((i+1)*(2*t)-i)/2:((2*t-2)*(2*t-2)*((i+1)*(2*t-2)+i)+2)/2;case D.backOutIn:var a=1.70158;return t<.5?.5*((t=2*t-1)*t*((a+1)*t+a)+1):.5*(t=2*t-1)*t*((a+1)*t-a)+.5;case D.elasticIn:return 0===t?0:1===t?1:-Math.pow(2,10*(t-1))*Math.sin(5*(t-1.1)*Math.PI);case D.elasticOut:return 0===t?0:1===t?1:Math.pow(2,-10*t)*Math.sin(5*(t-.1)*Math.PI)+1;case D.elasticInOut:return 0===t?0:1===t?1:t<.5?-.5*Math.pow(2,20*t-10)*Math.sin((20*t-11.125)*Math.PI/2.25):.5*Math.pow(2,-20*t+10)*Math.sin((20*t-11.125)*Math.PI/2.25)+1;case D.elasticOutIn:return 0===t?0:1===t?1:t<.5?.5*Math.pow(2,-20*t)*Math.sin(5*(20*t-.5)*Math.PI)+.5:.5*-Math.pow(2,10*(2*t-1.5))*Math.sin(5*(2*t-1.6)*Math.PI)+.5;case D.bounceIn:return 1-this._bounceOut(1-t);case D.bounceOut:return this._bounceOut(t);case D.bounceInOut:return t<.5?(1-this._bounceOut(1-2*t))/2:(1+this._bounceOut(2*t-1))/2;case D.bounceOutIn:return t<.5?this._bounceOut(2*t)/2:(1-this._bounceOut(2-2*t))/2+.5;default:return t}},r._bounceOut=function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},r._initGraphics=function(){var t,n="TrajectoryGraphics_"+this.node.uuid,e=null==(t=this.node.parent)?void 0:t.getChildByName(n);e||(e=new h(n),this.node.parent?this.node.parent.addChild(e):this.node.addChild(e)),this._graphics=e.getComponent(l),this._graphics||(this._graphics=e.addComponent(l))},r._drawTrajectory=function(){if(this.showTrajectory){this._graphics.clear(),this._graphics.lineWidth=this.trajectoryWidth,this._graphics.strokeColor=this.trajectoryColor;var t=this._graphics.node;this.node.parent&&(t.parent=this.node.parent,this._graphics.moveTo(this._startPoint.x,this._startPoint.y),this._graphics.quadraticCurveTo(this._controlPoint.x,this._controlPoint.y,this._endPoint.x,this._endPoint.y)),this._graphics.stroke()}},n}(d)).prototype,"speed",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 600}}),x=n(v.prototype,"controlPointSide",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return L.Left}}),T=n(v.prototype,"controlPointOffset",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),k=n(v.prototype,"controlPointRandomness",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.3}}),z=n(v.prototype,"autoRotate",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),C=n(v.prototype,"showTrajectory",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),j=n(v.prototype,"trajectoryColor",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new p(0,255,0,255)}}),R=n(v.prototype,"trajectoryWidth",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 3}}),S=n(v.prototype,"easing",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return D.linear}}),w=v))||w));r._RF.pop()}}}));

System.register("chunks:///_virtual/GameManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BezierMove.ts"],(function(e){var t,o,n,r,i,s,a,c,d,l,u,f,h,p,w,g,b,S,m;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.inheritsLoose,n=e.createClass,r=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){s=e.cclegacy,a=e._decorator,c=e.Node,d=e.EditBox,l=e.Toggle,u=e.ToggleContainer,f=e.instantiate,h=e.math,p=e.UITransform,w=e.Vec3,g=e.Component},function(e){b=e.ControlPointSideType,S=e.EasingType,m=e.BezierMove}],execute:function(){var y,T,O,E,v,C,_,L,z,k,G,I,R,P,D,M,N,B;s._RF.push({},"7d800A9z+9B6KOipS6FWVNf","GameManager",void 0);var A=a.ccclass,H=a.property;e("GameManager",(y=A("GameManager"),T=H(c),O=H(d),E=H(l),v=H([c]),C=H(u),_=H(u),L=H(u),y((G=t((k=function(e){function t(){for(var t,o=arguments.length,n=new Array(o),s=0;s<o;s++)n[s]=arguments[s];return t=e.call.apply(e,[this].concat(n))||this,r(t,"ndSword",G,i(t)),r(t,"_numberOfSwords",I,i(t)),r(t,"countOfSwords",R,i(t)),r(t,"showtrace",P,i(t)),r(t,"swordList",D,i(t)),r(t,"controlSide",M,i(t)),r(t,"offset",N,i(t)),r(t,"easingControl",B,i(t)),t._selectedControlSide=b.Left,t._offset=.5,t._isRandomOffset=!1,t.selectedEasingType=S.linear,t}o(t,e);var s=t.prototype;return s.start=function(){var e=this;this.swordList.push(this.ndSword),this.createSwords(this.numberOfSwords),this.countOfSwords.string=this.numberOfSwords.toString(),this.countOfSwords.node.on(d.EventType.TEXT_CHANGED,(function(){e.numberOfSwords=parseInt(e.countOfSwords.string)}),this),this.node.on(c.EventType.TOUCH_END,this.onTouchEnd,this),this.controlSide.toggleItems.forEach((function(t,o){t.node.on(l.EventType.TOGGLE,(function(){if(t.isChecked)switch(o){case 0:e._selectedControlSide=b.Left;break;case 1:e._selectedControlSide=b.Right;break;case 2:e._selectedControlSide=b.Random}}))})),this.offset.toggleItems.forEach((function(t,o){t.node.on(l.EventType.TOGGLE,(function(){if(t.isChecked)switch(o){case 0:e._isRandomOffset=!1;break;case 1:e._isRandomOffset=!0}}))})),this.easingControl.toggleItems.forEach((function(t,o){t.node.on(l.EventType.TOGGLE,(function(){if(t.isChecked)switch(o){case 0:e.selectedEasingType=S.linear;break;case 1:e.selectedEasingType=S.quadIn;break;case 2:e.selectedEasingType=S.cubicOut;break;case 3:e.selectedEasingType=S.bounceIn}}))}))},s.onDestroy=function(){this.node.off(c.EventType.TOUCH_END,this.onTouchEnd,this)},s.createSwords=function(e){this.deleteSwords();for(var t=0;t<e-1;t++){var o=f(this.ndSword);o.setParent(this.node),o.angle=h.randomRangeInt(-60,60),this.swordList.push(o)}},s.deleteSwords=function(){for(var e=0;e<this.swordList.length;e++)this.swordList[e]!==this.ndSword&&this.swordList[e].destroy();this.swordList.length=0,this.swordList.push(this.ndSword)},s.update=function(e){},s.onTouchEnd=function(e){for(var t=e.getUILocation(),o=this.convertToWorldPosition(t.x,t.y),n=0;n<this.swordList.length;n++){var r=this.swordList[n].getComponent(m);r.showTrajectory=this.showtrace.isChecked,r.controlPointSide=this._selectedControlSide,r.controlPointOffset=this._isRandomOffset?Math.random():this._offset,r.easing=this.selectedEasingType,r.moveTo(o)}},s.convertToWorldPosition=function(e,t){return this.node.getComponent(p).convertToNodeSpaceAR(new w(e,t,0))},s.onControlSideChanged=function(e,t){},n(t,[{key:"numberOfSwords",get:function(){return this._numberOfSwords},set:function(e){console.log("set numberOfSwords:",e),this._numberOfSwords=e,this.createSwords(this._numberOfSwords)}}]),t}(g)).prototype,"ndSword",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=t(k.prototype,"_numberOfSwords",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 3}}),t(k.prototype,"numberOfSwords",[H],Object.getOwnPropertyDescriptor(k.prototype,"numberOfSwords"),k.prototype),R=t(k.prototype,"countOfSwords",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=t(k.prototype,"showtrace",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=t(k.prototype,"swordList",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),M=t(k.prototype,"controlSide",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=t(k.prototype,"offset",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=t(k.prototype,"easingControl",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=k))||z));s._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./BezierMove.ts","./GameManager.ts"],(function(){return{setters:[null,null],execute:function(){}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});